
<router-outlet></router-outlet>
<p>
  <br><input type="button" style = "position:absolute; left:1200px; top:10px;" class="btnhome" name="HomE" value="HomE" (click)="home()"><br>
</p>    

    <div class="text-center"> 
      <form [formGroup]="ObjSampleForm">
        <div class="card-box">         
                    <div class="row">
                      <div class="table-responsive"><br>
                        <h2 style="text-align:center ;">Borrow Details</h2>

<div><input type="date" formControlName="date1" value="date1" max="{{date| date:'yyyy/MM/dd' }}" ></div>
<div><input type="date" formControlName="date2" value="date2" max="{{date| date:'yyyy/MM/dd' }}"></div>

<div><input type="button" (click)="getFilter()" value="FILTER"></div>

                            <table align="center" class="table-bordered" id="datatable" role="grid" >
                             
                              <thead class="bg-primary text-white">
                                  <tr role="row">
                                   
                                    <th (click)="sortfn('user.firstName')">User Name</th>
                                    <th (click)="sortfn('books.booksName')">Book Name</th>
                                    <th (click)="sortfn('issueDate')">Issue Date</th>                                  
                                    <th (click)="sortfn('returnDate')">Return Date</th>                             
                                    <th (click)="sortfn('dueDate')">Due Date</th>
                                    <th (click)="sortfn('dueDays')">DueDays</th>                                  
                                    <th (click)="sortfn('fine')">Fine(INR)</th>
                                    <th (click)="sortfn('bookReturnedDate')">Returned Date</th>
                                    <th (click)="sortfn('status')">Status</th>
                                    <th (click)="sortfn('reason')">Reason</th>
                                    <th>Action</th>
                                    </tr>
                              </thead>
          <tbody>
        <!-- <tr *ngFor="let borrow of  borrowdata">

            <td>{{borrow.user.firstName}}</td>
            <td>{{borrow.books.booksName}}</td>
            <td>{{borrow.issueDate| date:'dd/MM/yyyy'}}</td>                 
            <td>{{borrow.returnDate| date:'dd/MM/yyyy'}}</td>
            <td>{{borrow.dueDate| date:'dd/MM/yyyy'}}</td>
            <td>{{borrow.bookReturnedDate| date:'dd/MM/yyyy'}}</td>
            <td>{{borrow.status}}</td>
            <td>{{borrow.reason}}</td>
 
    <td>
    <button type ="button" style = "margin-top: 20px;" class="btnn0" *ngIf="borrow.status!='APPROVED' && borrow.status!='RETURNED'"  (click)="acceptRequest(borrow)">Accept</button>&nbsp;&nbsp;
    <button type ="button" class="btnn2" *ngIf="borrow.status=='REQUESTED' "  (click)="rejectRequest(borrow)">Reject</button>&nbsp;&nbsp;<br>
    <button type ="button" class="btnn" *ngIf="borrow.status!='RETURNED' && borrow.status=='APPROVED' " (click)="bookReturn(borrow)" >Return</button>
    <button type ="button" class="btnn1" *ngIf="borrow.status=='RETURNED'  "  (click)="undo(borrow)" >Undo</button><br><br>
  </td>
        </tr> -->

        <tr *ngFor="let post of  data
        | paginate
         :{
          itemsPerPage: tableSize,
          currentPage: page,
          totalItems: count
        };
        let i = index
        " >
        <td scope="row">{{ post.user.firstName }}</td>

          <!-- <td>{{post.user.firstName}}</td> -->
          <td>{{post.books.booksName}}</td>
          <td>{{post.issueDate| date:'dd/MM/yyyy'}}</td>                 
          <td>{{post.returnDate| date:'dd/MM/yyyy'}}</td>
          <td>{{post.dueDate| date:'dd/MM/yyyy'}}</td>
          <td>{{post.dueDays}}</td>
          <td>{{post.fine}}</td>
          
          <td>{{post.bookReturnedDate| date:'dd/MM/yyyy'}}</td>
          <td>{{post.status}}</td>
          <td>{{post.reason}}</td>

  <td>
  <button type ="button" style = "margin-top: 20px;" class="btnn0" *ngIf="post.status!='APPROVED' && post.status!='RETURNED'"  (click)="acceptRequest(post)">Accept</button>&nbsp;&nbsp;
  <button type ="button" class="btnn2" *ngIf="post.status=='REQUESTED' "  (click)="rejectRequest(post)">Reject</button>&nbsp;&nbsp;<br>
  <button type ="button" class="btnn" *ngIf="post.status!='RETURNED' && post.status=='APPROVED' " (click)="bookReturn(post)" >Return</button>
  <button type ="button" class="btnn1" *ngIf="post.status=='RETURNED'  "  (click)="undo(post)" >Undo</button><br><br>
</td>
      </tr>
        
                              </tbody>
                          </table>

                          <div class="d-flex justify-content-center">
                            <pagination-controls (pageChange)="onTableDataChange(page=$event)">
                            </pagination-controls>
                        
                      </div>
                  </div>
                </div>